@model IEnumerable<UrlShortenerService.MVC.Data.Entities.ShortUrl>

<div class="card shadow-sm border-0 rounded-3 mt-4">
    <div class="card-body">
        <h5 class="card-title text-primary">Recent Shortened URLs</h5>
        <hr />

        @if (Model != null && Model.Any())
        {
            <div class="table-responsive">
                <table class="table table-bordered table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th scope="col">Short URL</th>
                            <th scope="col" style="width: 200px;">Original URL </th> <!-- ✅ Added column header -->
                            <th scope="col" class="text-center" style="width: 150px;">Created</th>
                            <th scope="col" class="text-center" style="width: 100px;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var url in Model)
                        {
                            <tr>
                                <td>
                                    <a href="@($"{Context.Request.Scheme}://{Context.Request.Host}/{url.ShortCode}")"
                                       target="_blank"
                                       class="text-decoration-none fw-semibold">
                                        @($"{Context.Request.Host}/{url.ShortCode}")
                                    </a>
                                </td>

                                <!-- ✅ Show the Original URL -->
                                <td style="word-break: break-all;">
                                    <a href="@url.OriginalUrl" target="_blank" class="text-muted text-decoration-none">
                                        @url.OriginalUrl
                                    </a>
                                </td>

                                <td class="text-center">
                                    <small class="text-muted">@url.CreatedAt.ToLocalTime().ToString("g")</small>
                                </td>

                                <td class="text-center">
                                    <form asp-controller="UrlShortener" asp-action="Delete" asp-route-id="@url.Id" method="post">
                                        <button type="submit"
                                                class="btn btn-outline-danger btn-sm"
                                                onclick="return confirm('Are you sure you want to delete this short URL?');">
                                            Delete
                                        </button>
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <p class="text-muted">No URLs found yet.</p>
        }
    </div>
</div>
